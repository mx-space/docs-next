(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[585],{4374:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/development/admin",function(){return t(9007)}])},8076:function(e,n,t){"use strict";var a=t(1527),s=t(5903),i=t.n(s);t(959);var r=t(7634),l=t(1689);let o=(0,a.jsxs)("span",{className:"jsx-ef39c6053f12c009",children:[(0,a.jsx)("img",{height:40,src:"https://cdn.jsdelivr.net/gh/mx-space/.github@main/uwu.png",className:"jsx-ef39c6053f12c009"}),(0,a.jsx)("span",{className:"jsx-ef39c6053f12c009",children:"Mix Space"}),(0,a.jsx)(i(),{id:"ef39c6053f12c009",children:"span.jsx-ef39c6053f12c009{padding:.5rem .5rem .5rem 0;-webkit-mask-image:-webkit-linear-gradient(30deg,black 25%,rgba(0,0,0,.2)50%,black 75%);mask-image:-webkit-linear-gradient(30deg,black 25%,rgba(0,0,0,.2)50%,black 75%);mask-image:-moz-linear-gradient(30deg,black 25%,rgba(0,0,0,.2)50%,black 75%);mask-image:-o-linear-gradient(30deg,black 25%,rgba(0,0,0,.2)50%,black 75%);mask-image:linear-gradient(60deg,black 25%,rgba(0,0,0,.2)50%,black 75%);-webkit-mask-size:400%;mask-size:400%;-webkit-mask-position:0%;mask-position:0%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;font-size:16px;font-weight:600}img.jsx-ef39c6053f12c009{margin-right:8px;height:40px}span.jsx-ef39c6053f12c009:hover{-webkit-mask-position:100%;mask-position:100%;-webkit-transition:mask-position 1s ease,-webkit-mask-position 1s ease;-moz-transition:mask-position 1s ease,-webkit-mask-position 1s ease;-o-transition:mask-position 1s ease,-webkit-mask-position 1s ease;transition:mask-position 1s ease,-webkit-mask-position 1s ease}"})]}),d={logo:o,head:function(){let{title:e}=(0,r.ZR)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("link",{rel:"dns-prefetch",href:"//pan.vinua.cn"}),(0,a.jsx)("meta",{name:"msapplication-TileColor",content:"#fff"}),(0,a.jsx)("meta",{name:"theme-color",content:"#fff"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,a.jsx)("meta",{httpEquiv:"Content-Language",content:"en"}),(0,a.jsx)("meta",{name:"description",content:"A flexible, modular CMS Blog System."}),(0,a.jsx)("meta",{name:"og:description",content:"A flexible, modular CMS Blog System."}),(0,a.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,a.jsx)("meta",{name:"twitter:site:domain",content:"mog.js.org"}),(0,a.jsx)("meta",{name:"twitter:url",content:"https://mog.js.org"}),(0,a.jsx)("meta",{name:"og:title",content:e?e+" | Mix Space":"Mix Space"}),(0,a.jsx)("meta",{name:"apple-mobile-web-app-title",content:"Mix Space"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.svg",type:"image/svg+xml"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.png",type:"image/png"})]})},project:{link:"https://github.com/mx-space/core"},docsRepositoryBase:"https://github.com/mx-space/docs/blob/main",footer:{text:(0,a.jsx)("div",{className:"flex w-full flex-col items-center sm:items-start",children:(0,a.jsxs)("p",{className:"text-xs",children:["\xa9 ",new Date().getFullYear()," This project is licensed under AGPLv3 with additional terms, and this documentation is licensed under CC BY 4.0. All licensed. 2021-present Mix Space Team"]})})},useNextSeoProps(){let{asPath:e}=(0,l.useRouter)();if("/"!==e)return{titleTemplate:"%s | Mix Space"}},editLink:{text:"Edit this page on GitHub →"},banner:{key:"theme-shiro",text:(0,a.jsx)("a",{href:"https://mx-space.js.org/themes/shiro",target:"_blank",children:"\uD83C\uDFA8 New Mix Space theme `Shiro` is released. Read more →"})}};n.Z=d},9007:function(e,n,t){"use strict";t.r(n);var a=t(1527),s=t(985),i=t(7634),r=t(8076);t(9941),t(1365);var l=t(6736);t(8823);var o=t(5032);let d={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,l.ah)(),e.components);return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)},pageOpts:{filePath:"pages/development/admin.mdx",route:"/development/admin",headings:[{depth:1,value:"后台单独部署",id:"后台单独部署"},{depth:2,value:"拉取源文件",id:"拉取源文件"},{depth:2,value:"修改配置文件",id:"修改配置文件"},{depth:2,value:"构建",id:"构建"},{depth:2,value:"部署产物",id:"部署产物"},{depth:2,value:"修改后端配置",id:"修改后端配置"}],pageMap:[{kind:"Meta",data:{index:{type:"page",title:"Mix Space",display:"hidden",theme:{layout:"raw"}},docs:{type:"page",title:"部署文档"},usage:{type:"page",title:"使用指南"},themes:{type:"page",title:"前端主题",theme:{layout:"raw"}},development:{title:"系统开发",type:"page"}}},{kind:"Folder",name:"development",route:"/development",children:[{kind:"Meta",data:{index:"前言",frontend:"前端开发指南",admin:"后台单独部署"}},{kind:"MdxPage",name:"admin",route:"/development/admin"},{kind:"MdxPage",name:"frontend",route:"/development/frontend"},{kind:"MdxPage",name:"index",route:"/development"}]},{kind:"Folder",name:"docs",route:"/docs",children:[{kind:"Meta",data:{index:"引言",features:"主要功能","-- advanced":{type:"separator",title:"部署"},docker:"Docker 部署",scripts:"预设脚本部署",advanced:"进阶部署",extra:"相关内容",community:"社区分享"}},{kind:"MdxPage",name:"advanced",route:"/docs/advanced"},{kind:"MdxPage",name:"community",route:"/docs/community"},{kind:"MdxPage",name:"docker",route:"/docs/docker"},{kind:"MdxPage",name:"extra",route:"/docs/extra"},{kind:"MdxPage",name:"features",route:"/docs/features"},{kind:"MdxPage",name:"index",route:"/docs",frontMatter:{title:"引言"}},{kind:"MdxPage",name:"scripts",route:"/docs/scripts"}]},{kind:"MdxPage",name:"index",route:"/",frontMatter:{title:"Mix Space - An Alternative Personal Space."}},{kind:"Folder",name:"themes",route:"/themes",children:[{kind:"Meta",data:{index:{title:"主题目录"},shiro:{title:"部署 Shiro 主题",theme:{layout:"default"}},kami:{title:"部署 Kami 主题",theme:{layout:"default"}},yun:{title:"部署 Yun 主题",theme:{layout:"default"}}}},{kind:"MdxPage",name:"index",route:"/themes",frontMatter:{title:"前端主题"}},{kind:"MdxPage",name:"kami",route:"/themes/kami"},{kind:"Folder",name:"shiro",route:"/themes/shiro",children:[{kind:"Meta",data:{index:"部署主题",extra:"额外功能",config:"配置项"}},{kind:"MdxPage",name:"config",route:"/themes/shiro/config"},{kind:"MdxPage",name:"extra",route:"/themes/shiro/extra"},{kind:"MdxPage",name:"index",route:"/themes/shiro"}]},{kind:"MdxPage",name:"yun",route:"/themes/yun"}]},{kind:"Folder",name:"usage",route:"/usage",children:[{kind:"Meta",data:{index:"使用指南","-- built-in":{type:"separator",title:"官方指南"},serverless:"云函数",xlog:"xLog 集成",search:"Algolia Search",backup:"备份与回滚",update:"更新 Mix Space",security:"Key 加密与安全性",oauth:"OAuth 2.0","-- community":{type:"separator",title:"社区使用指南"}}},{kind:"MdxPage",name:"backup",route:"/usage/backup"},{kind:"MdxPage",name:"index",route:"/usage"},{kind:"MdxPage",name:"oauth",route:"/usage/oauth"},{kind:"MdxPage",name:"search",route:"/usage/search"},{kind:"MdxPage",name:"security",route:"/usage/security"},{kind:"MdxPage",name:"serverless",route:"/usage/serverless"},{kind:"MdxPage",name:"update",route:"/usage/update"},{kind:"MdxPage",name:"xlog",route:"/usage/xlog"}]}],flexsearch:{codeblocks:!1},title:"后台单独部署"},pageNextRoute:"/development/admin",nextraLayout:i.ZP,themeConfig:r.Z};function c(e){let n=Object.assign({h1:"h1",p:"p",ul:"ul",li:"li",a:"a",h2:"h2",pre:"pre",code:"code",span:"span"},(0,l.ah)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{children:"后台单独部署"}),"\n","\n",(0,a.jsx)(n.p,{children:"在正常情况下，你不需要单独部署后台，因为后台已经被打包到了后端中。"}),"\n",(0,a.jsx)(n.p,{children:"如果你有以下需求："}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"想使用其他域名作为后台地址"}),"\n",(0,a.jsx)(n.li,{children:"想使用其他端口作为后台地址"}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["那么你可以选择单独部署后台，或者你可以参考 ",(0,a.jsx)(n.a,{href:"/themes/kami#%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86",children:"反向代理配置"}),"。"]}),"\n",(0,a.jsx)(n.h2,{id:"拉取源文件",children:"拉取源文件"}),"\n",(0,a.jsx)(n.pre,{"data-language":"bash","data-theme":"default",hasCopyCode:!0,children:(0,a.jsxs)(n.code,{"data-language":"bash","data-theme":"default",children:[(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"cd"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"mx-space"})]}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"git"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"clone"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"https://github.com/mx-space/mx-admin.git"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"--depth"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"})]})]})}),"\n",(0,a.jsx)(n.h2,{id:"修改配置文件",children:"修改配置文件"}),"\n",(0,a.jsxs)(n.p,{children:["进入到后台源码目录，找到 ",(0,a.jsx)(n.code,{children:".env.production"})," 文件，取消对应配置项的注释，然后修改为你的配置。"]}),"\n",(0,a.jsx)(n.p,{children:"例如："}),"\n",(0,a.jsx)(n.pre,{"data-language":"txt","data-theme":"default",hasCopyCode:!0,children:(0,a.jsxs)(n.code,{"data-language":"txt","data-theme":"default",children:[(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"VITE_APP_BASE_API=https://server.test.cn/api/v2"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"VITE_APP_WEB_URL=https://www.test.cn"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"VITE_APP_GATEWAY=https://server.test.cn"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"# # VITE_APP_PUBLIC_URL=https://fastly.jsdelivr.net/gh/mx-space/admin-next@gh-pages/"})})]})}),"\n",(0,a.jsxs)(n.p,{children:["其他可以定义的配置在文件 ",(0,a.jsx)(n.code,{children:"/src/configs.ts"})," 中。"]}),"\n",(0,a.jsx)(n.h2,{id:"构建",children:"构建"}),"\n",(0,a.jsxs)(o.UW,{type:"warning",emoji:"⚠️",children:[(0,a.jsx)(n.p,{children:"构建 mx-admin 需要的内存至少为 2 Gib，如果你服务器内存不足，你可以在本地构建成功后，将产物上传到服务器。"}),(0,a.jsx)(n.p,{children:"在 Windows 系统上，mx-admin 无法正常构建，你可以使用 WSL2 或者 Linux 系统。"})]}),"\n",(0,a.jsx)(n.pre,{"data-language":"bash","data-theme":"default",hasCopyCode:!0,children:(0,a.jsxs)(n.code,{"data-language":"bash","data-theme":"default",children:[(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"pnpm"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"i"})]}),"\n",(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"pnpm"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"build"})]})]})}),"\n",(0,a.jsx)(n.h2,{id:"部署产物",children:"部署产物"}),"\n",(0,a.jsx)(n.p,{children:"构建生成的产物在 dist 目录下，你可以直接把它们移动到你准备好的后台网站的根目录下。"}),"\n",(0,a.jsxs)(n.p,{children:["假设你准备的后台网站域名是 ",(0,a.jsx)(n.code,{children:"admin.test.cn"}),"，"]}),"\n",(0,a.jsxs)(n.p,{children:["网站根目录为 ",(0,a.jsx)(n.code,{children:"/var/www/admin.test.cn/"}),"，"]}),"\n",(0,a.jsxs)(n.p,{children:["那么，你把 dist 目录下的所有文件移动到 ",(0,a.jsx)(n.code,{children:"/var/www/admin.test.cn/"})," 目录下即可。"]}),"\n",(0,a.jsx)(n.h2,{id:"修改后端配置",children:"修改后端配置"}),"\n",(0,a.jsxs)(n.p,{children:["编辑 Core 的 ",(0,a.jsx)(n.code,{children:".env"})," 文件，修改 ",(0,a.jsx)(n.code,{children:"ALLOWED_ORIGINS"})," ，添加你的后台域名。"]}),"\n",(0,a.jsxs)(n.p,{children:["示例域名为 ",(0,a.jsx)(n.code,{children:"admin.test.cn"})," 。"]}),"\n",(0,a.jsx)(n.p,{children:"例如："}),"\n",(0,a.jsx)(n.pre,{"data-language":"txt","data-theme":"default",hasCopyCode:!0,children:(0,a.jsxs)(n.code,{"data-language":"txt","data-theme":"default",children:[(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"# THIS ENV FILE EXAMPLE ONLY FOR DOCKER COMPOSE"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"# SEE https://docs.docker.com/compose/environment-variables/#the-env-file"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"JWT_SECRET=7294c34e0b28ad28          #此处填写一个长度不小于 16 个字符，不大于 32 个字符的字符串"})}),"\n",(0,a.jsx)(n.span,{className:"line",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"ALLOWED_ORIGINS=test.cn,www.test.cn,admin.test.cn"})})]})}),"\n",(0,a.jsx)(n.p,{children:"然后重新启动 Core 即可："}),"\n",(0,a.jsx)(n.pre,{"data-language":"bash","data-theme":"default",hasCopyCode:!0,children:(0,a.jsx)(n.code,{"data-language":"bash","data-theme":"default",children:(0,a.jsxs)(n.span,{className:"line",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"docker"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"compose"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"up"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"-d"})]})})})]})}n.default=(0,s.j)(d)}},function(e){e.O(0,[163,774,888,179],function(){return e(e.s=4374)}),_N_E=e.O()}]);